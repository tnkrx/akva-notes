---
title: Web Requests
---
#### 1. Solicitações Web e Protocolo HTTP

* **HTTP (HyperText Transfer Protocol):** É um protocolo de nível de aplicação usado para acessar recursos da World Wide Web. A comunicação HTTP ocorre entre um cliente, que solicita um recurso, e um servidor, que processa a solicitação e retorna o recurso.
* **Porta Padrão:** A porta padrão para comunicação HTTP é a porta 80, embora possa ser alterada.
* **Hypertext:** Refere-se a texto que contém links para outros recursos e que os leitores podem interpretar facilmente.

---
#### 2. Estrutura de URL (Uniform Resource Locator)

URLs são usadas para acessar recursos via HTTP e possuem vários componentes:

* **Scheme (Esquema):** Identifica o protocolo acessado (ex: `http://` ou `https://`).
* **User Info (Informações do Usuário):** Componente opcional que contém credenciais (separadas por dois pontos `:`) usadas para autenticação.
* **Host:** Significa a localização do recurso, podendo ser um nome de host ou um endereço IP.
* **Port (Porta):** Separada do Host por dois pontos (`:`). Se não for especificada, o esquema `http` assume a porta 80 e o `https` assume a porta 443.
* **Path (Caminho):** Aponta para o recurso acessado, que pode ser um arquivo ou pasta.
* **Query String (String de Consulta):** Começa com um ponto de interrogação (`?`) e consiste em um ou mais parâmetros e valores, separados por um e comercial (`&`).
* **Fragments (Fragmentos):** Processados pelos navegadores no lado do cliente para localizar seções dentro do recurso principal.
* **Campos Obrigatórios:** Os campos obrigatórios principais são o esquema e o host.

---
#### 3. Fluxo HTTP (HTTP Flow)

* **Resolução DNS:** Quando um usuário insere uma URL, o navegador primeiro envia uma solicitação a um servidor DNS (Domain Name Resolution) para resolver o domínio e obter seu endereço IP.
* **Solicitação Inicial:** Após obter o IP, o navegador envia uma solicitação `GET` para a porta HTTP padrão (ex: 80), solicitando o caminho raiz `/`.
* **Resposta:** O servidor web processa a solicitação e retorna o recurso (por exemplo, `index.html`) como uma resposta HTTP. A resposta inclui um código de status (ex: `200 OK`), que indica que a solicitação foi processada com sucesso.

---
#### 4. Protocolo HTTPS (HTTP Secure)

* **Necessidade de Segurança:** O HTTP transfere todos os dados em texto claro, tornando-o vulnerável a ataques Man-in-the-middle (MiTM), onde credenciais podem ser visualizadas.
* **Criptografia:** O HTTPS foi criado para combater isso, transferindo todas as comunicações em formato criptografado.
* **Identificação:** Websites que usam HTTPS são identificados por `https://` em seu URL e pelo ícone de cadeado no navegador.
* **Fluxo HTTPS:** Se um cliente tenta acessar um site HTTPS usando `http://`, o servidor geralmente redireciona o cliente da porta 80 (HTTP não criptografado) para a porta segura 443 (HTTPS) usando o código de resposta `301 Moved Permanently`. Segue-se um handshake criptografado, incluindo a troca de certificados SSL.

---
#### 5. cURL (Client URL)

* **Ferramenta de Linha de Comando:** cURL é uma ferramenta e biblioteca de linha de comando essencial para testes de penetração web, suportando HTTP e muitos outros protocolos.
* **Saída:** Ao contrário de um navegador, o cURL imprime o código HTML/JavaScript/CSS em seu formato bruto.
* **Flags Comuns:**

  * **`-O`:** Salva a saída em um arquivo usando o nome do arquivo remoto.
  * **`-o <file>`:** Permite especificar o nome do arquivo de saída em vez de salvar no *stdout* (saída padrão).
  * **`-s`:** Modo silencioso, que suprime informações de status.
  * **`-v`:** Modo *verbose* (detalhado), usado para visualizar a solicitação HTTP completa e a resposta.
  * **`-k`:** Ignora a verificação de certificados SSL inválidos, útil ao testar aplicações locais.
  * **`-I`:** Envia uma solicitação `HEAD` e exibe apenas os cabeçalhos de resposta.
  * **`-i`:** Exibe tanto os cabeçalhos quanto o corpo da resposta.
  * **`-H`:** Usado para definir cabeçalhos de solicitação.
  * **`-A`:** Usado para definir o cabeçalho `User-Agent`.
  * **`-u`:** Usado para fornecer nome de usuário e senha do servidor para autenticação.

---
#### 6. Estrutura de Solicitações e Respostas HTTP

* **Solicitação HTTP:** Contém detalhes exigidos do servidor, incluindo o recurso (URL, caminho, parâmetros) e cabeçalhos. A primeira linha contém o **Método** (ex: `GET`), o **Caminho** (ex: `/users/login.html`) e a **Versão** HTTP (ex: `HTTP/1.1`).
* **Resposta HTTP:** Contém o código de resposta e pode incluir o recurso solicitado. A primeira linha contém a **Versão** HTTP e o **Código de Resposta** (ex: `200 OK`). O corpo da resposta pode ser HTML, JSON, imagens ou outros recursos.

---
#### 7. Cabeçalhos HTTP (HTTP Headers)

Os cabeçalhos transferem informações entre cliente e servidor e são divididos em categorias:

**A. Cabeçalhos Gerais (General Headers)**

Usados em solicitações e respostas para descrever a mensagem:

* **`Date`:** Data e hora de origem da mensagem.
* **`Connection`:** Indica se a conexão de rede deve permanecer ativa (`keep-alive`) ou ser encerrada (`close`) após a solicitação.

**B. Cabeçalhos de Entidade (Entity Headers)**

Descrevem o conteúdo (entidade) transferido pela mensagem:

* **`Content-Type`:** Descreve o tipo de recurso transferido (ex: `text/html`).
* **`Content-Length`:** Contém o tamanho da entidade transmitida.
* **`Content-Encoding`:** Especifica o tipo de codificação usada, como `gzip` para compressão de dados.

**C. Cabeçalhos de Solicitação (Request Headers)**

Enviados pelo cliente e não se relacionam com o conteúdo da mensagem:

* **`Host`:** Especifica o host que está sendo consultado, importante para servidores que hospedam diferentes sites.
* **`User-Agent`:** Descreve o cliente solicitando recursos (navegador, versão, sistema operacional).
* **`Referer`:** Indica a origem da solicitação atual (página anterior).
* **`Cookie`:** Contém pares nome=valor de cookies, que atuam como identificadores e mantêm o acesso do cliente.
* **`Authorization`:** Usado para autenticação; o servidor pode retornar um token (em tipos como `Basic` ou `Bearer`) após a autenticação bem-sucedida.

**D. Cabeçalhos de Resposta (Response Headers)**

Usados na resposta HTTP:

* **`Server`:** Contém informações sobre o servidor HTTP que processou a solicitação.
* **`Set-Cookie`:** Contém os cookies que o navegador deve armazenar para futuras solicitações.
* **`WWW-Authenticate`:** Notifica o cliente sobre o tipo de autenticação necessário para acessar o recurso solicitado.

**E. Cabeçalhos de Segurança (Security Headers)**

Usados para especificar regras e políticas de segurança para o navegador:

* **`Content-Security-Policy`:** Determina a política do site em relação a recursos injetados externamente (como código JavaScript), prevenindo ataques XSS.
* **`Strict-Transport-Security`:** Força toda a comunicação a ser feita através do protocolo HTTPS, impedindo o acesso via HTTP não criptografado.
* **`Referrer-Policy`:** Regula se o navegador deve incluir o valor do cabeçalho `Referer`.

---
#### 8. Métodos de Solicitação HTTP (HTTP Request Methods)

Métodos usados para instruir o servidor sobre a ação a ser executada:

{{< tabs items="GET, POST, HEAD, PUT, DELETE, OPTIONS, PATCH" >}}

{{< tab >}}

* **Conceito:** Solicita um recurso específico. Dados adicionais podem ser passados via *query strings* no URL.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Envia dados para o servidor. Os dados são anexados no corpo da solicitação após os cabeçalhos. É usado comumente para formulários de login ou upload de dados.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Solicita os cabeçalhos que seriam retornados se uma solicitação `GET` fosse feita, sem retornar o corpo da resposta.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Cria novos recursos no servidor ou é usado para atualizar a entidade inteira em APIs.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Remove um recurso existente no servidor web.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Retorna informações sobre o servidor, como os métodos aceitos.
  {{< /tab >}}

{{< tab >}}

* **Conceito:** Aplica modificações parciais a um recurso em um local especificado.
  {{< /tab >}}

{{< /tabs >}}

---
#### 9. Códigos de Resposta HTTP (HTTP Response Codes)

Códigos de status que informam ao cliente o resultado de sua solicitação:

* **1xx (Informativos):** Fornece informações e não afeta o processamento.
* **2xx (Sucesso):** Retornado quando uma solicitação é bem-sucedida (ex: `200 OK`).
* **3xx (Redirecionamento):** Retornado quando o servidor redireciona o cliente (ex: `302 Found` ou `301 Moved Permanently`).
* **4xx (Erro do Cliente):** Significa solicitações inadequadas do cliente (ex: `400 Bad Request`, `403 Forbidden`, `404 Not Found`).
* **5xx (Erro do Servidor):** Retornado quando há um problema no próprio servidor HTTP (ex: `500 Internal Server Error`).

---
#### 10. Autenticação e Dados de Usuário

* **Autenticação Básica HTTP:** Tipo de autenticação gerenciada diretamente pelo servidor web, na qual as credenciais são codificadas em Base64 e enviadas no cabeçalho `Authorization`.
* **Parâmetros GET:** Os parâmetros são passados diretamente na URL (ex: `search.php?search=le`).
* **Requisições POST e Dados:** Requisições POST colocam os parâmetros do usuário no corpo da solicitação, sendo mais eficientes para transferir arquivos ou grandes quantidades de dados.
* **Cookies de Autenticação:** Após o login bem-sucedido, um cookie pode ser recebido através do cabeçalho `Set-Cookie` para persistir a autenticação. Em cURL, pode ser usado com o flag `-b` ou o cabeçalho `Cookie`.
* **Dados JSON:** Aplicações web modernas podem enviar dados de formulário em formato JSON, exigindo que o cabeçalho `Content-Type` seja definido como `application/json`.

---
#### 11. Interação com API CRUD

CRUD (Create, Read, Update, Delete) é um princípio usado em APIs para realizar operações em entidades de banco de dados:

* **Create (Criar):** Mapeado para o método **`POST`**. Usado para adicionar dados especificados a uma tabela do banco de dados.
* **Read (Ler):** Mapeado para o método **`GET`**. Usado para ler a entidade especificada.
* **Update (Atualizar):** Mapeado para o método **`PUT`** (ou `PATCH`). Usado para atualizar os dados de uma tabela, geralmente especificando a entidade a ser editada na URL.
* **Delete (Excluir):** Mapeado para o método **`DELETE`**. Usado para remover a linha especificada do banco de dados, especificando a entidade na URL.

